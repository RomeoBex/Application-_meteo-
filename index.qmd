---
title: "Application météo"
---

Prévisions météorologiques des 4 prochains jours : 

```{=html}
<!DOCTYPE html>
<html>
<head>
    <title>Prévisions de température</title>
</head>
<body>
    <table border="1">
        <tr>
            <th><strong>Jour</strong></th>
            <th><strong>Température actuelle (°C)</strong></th>
            <th><strong>Température maximale (°C)</strong></th>
            <th><strong>Température minimale (°C)</strong></th>
            <th><strong>Code Météo</strong></th>
            <th><strong>Précipitations (mm)</strong></th>
            <th><strong>Vitesse du vent maximale (km/h)</strong></th>
        </tr>
        <!-- Les données seront remplies ici par JavaScript -->
    </table>

    <footer>
        <p>&copy; <strong>2023 Roméo BEX Tous droits réservés.</strong></p>
    </footer>

    <script>
        // Définir l'URL de l'API de prévisions météorologiques
        const weatherApiUrl = "https://api.open-meteo.com/v1/meteofrance?latitude=43.6109&longitude=3.8763&daily=weathercode,rain_sum,windspeed_10m_max&timezone=Europe%2FBerlin";

        // Fonction pour obtenir le nom du jour de la semaine en fonction de la date
        function getDayName(day) {
            const days = ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"];
            return days[day];
        }

        // Fonction pour faire une requête à l'API de température actuelle
        function fetchCurrentTemperature() {
            const currentTempApiUrl = "https://api.open-meteo.com/v1/meteofrance?latitude=43.6109&longitude=3.8763&hourly=temperature_2m";

            fetch(currentTempApiUrl)
                .then(response => response.json())
                .then(data => {
                    const temperatureData = data.hourly.temperature_2m;

                    // Sélectionner le tableau HTML
                    const table = document.querySelector("table");

                    // Obtenir le jour actuel
                    const currentDate = new Date();
                    const currentDay = currentDate.getDay();

                    // Boucler à travers les données et les ajouter au tableau
                    for (let i = 0; i < 4; i++) { // Affiche uniquement les 4 prochains jours
                        const row = table.insertRow(-1);
                        const dayCell = row.insertCell(0);
                        const tempCell = row.insertCell(1);

                        // Calculer le jour de la semaine en fonction du jour actuel
                        const dayIndex = (currentDay + i) % 7;
                        const dayName = getDayName(dayIndex);

                        dayCell.innerHTML = dayName;
                        if (temperatureData[i] !== undefined) {
                            tempCell.innerHTML = `${temperatureData[i]}°C`;
                        } else {
                            tempCell.innerHTML = "N/A";
                        }
                    }
                })
                .catch(error => console.error("Erreur lors de la récupération des données de température actuelle : " + error));
        }

        // Fonction pour faire une requête à l'API de température maximale et minimale
        function fetchMaxMinTemperature() {
            const maxMinTempApiUrl = "https://api.open-meteo.com/v1/meteofrance?latitude=43.6109&longitude=3.8763&current=temperature_2m&daily=temperature_2m_max,temperature_2m_min&timezone=Europe%2/Berlin";

            fetch(maxMinTempApiUrl)
                .then(response => response.json())
                .then(data => {
                    // Récupérer les données de température maximale et minimale pour les 4 prochains jours
                    const maxTempData = data.daily.temperature_2m_max.slice(0, 4);
                    const minTempData = data.daily.temperature_2m_min.slice(0, 4);

                    const table = document.querySelector("table");

                    for (let i = 0; i < 4; i++) { // Affiche uniquement les 4 prochains jours
                        const row = table.rows[i + 1]; // Commence à la deuxième ligne
                        const maxTempCell = row.insertCell(2);
                        const minTempCell = row.insertCell(3);

                        if (maxTempData[i] !== undefined) {
                            maxTempCell.innerHTML = `${maxTempData[i]}°C`;
                        } else {
                            maxTempCell.innerHTML = "N/A";
                        }

                        if (minTempData[i] !== undefined) {
                            minTempCell.innerHTML = `${minTempData[i]}°C`;
                        } else {
                            minTempCell.innerHTML = "N/A";
                        }
                    }
                })
                .catch(error => console.error("Erreur lors de la récupération des données de température maximale et minimale : " + error));
        }

        // Fonction pour faire une requête à l'API de prévisions météorologiques
        function fetchWeatherForecast() {
            fetch(weatherApiUrl)
                .then(response => response.json())
                .then(data => {
                    const weatherData = data.daily;

                    const table = document.querySelector("table");

                    for (let i = 0; i < 4; i++) { // Affiche uniquement les 4 prochains jours
                        const row = table.rows[i + 1];
                        const weatherCodeCell = row.insertCell(4);
                        const rainSumCell = row.insertCell(5);
                        const windspeedCell = row.insertCell(6);

                        if (weatherData[i] !== undefined) {
                            weatherCodeCell.innerHTML = weatherData[i].weathercode;
                            rainSumCell.innerHTML = `${weatherData[i].rain_sum} mm`;
                            windspeedCell.innerHTML = `${weatherData[i].windspeed_10m_max} km/h`;
                        } else {
                            weatherCodeCell.innerHTML = "N/A";
                            rainSumCell.innerHTML = "N/A";
                            windspeedCell.innerHTML = "N/A";
                        }
                    }
                })
                .catch(error => console.error("Erreur lors de la récupération des données de prévisions météorologiques : " + error));
        }

        // Appeler les fonctions pour récupérer les données
        fetchCurrentTemperature();
        fetchMaxMinTemperature();
        fetchWeatherForecast();
    </script>
</body>
</html>

``` 